try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},i=(new e.Error).stack;i&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[i]="ac1c2c26-edee-4689-8135-b9e05b297b61",e._sentryDebugIdIdentifier="sentry-dbid-ac1c2c26-edee-4689-8135-b9e05b297b61")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8518],{9340:(e,i,n)=>{n.d(i,{R:()=>a,up:()=>t});var o=n(44180);let a=function(e){for(var i=arguments.length,n=Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];try{"function"==typeof window.gtag&&gtag(e,...n)}catch(e){(0,o.Cp)(e)}},t=e=>{a("consent","update",r(e))},r=e=>({ad_personalization:e.marketing?"granted":"denied",ad_user_data:e.marketing?"granted":"denied",ad_storage:e.marketing?"granted":"denied",analytics_storage:e.analytics?"granted":"denied",functionality_storage:"granted",personalization_storage:"granted",security_storage:"granted"})},21642:(e,i,n)=>{n.d(i,{Z:()=>a});var o=n(27062);let a=()=>{let{value:e}=(0,o.fS)("claude_ai_segment_enabled");return e}},35290:(e,i,n)=>{n.d(i,{ConsentProvider:()=>g,S:()=>p});var o=n(54568),a=n(44180),t=n(7620),r=n(96712),s=n(9340),d=n(25558),l=n(46612),c=n(89256),_=n.n(c),v=n(58826);let u=(0,t.createContext)({showConsentBanner:!1,openConsentBanner:_(),preferences:v.ok,savePreferences:_()}),g=e=>{let{children:i,requiresExplicitConsent:n}=e,[c,_,g]=function(e,i){let n=(0,r.l)(),[o,s]=(0,t.useState)(()=>!!n.get(e)),[d,l]=(0,t.useState)(()=>{try{let o=n.get(e);return o?JSON.parse(o):i}catch(n){return(0,a.Cp)(n,{extra:{message:"Malformed JSON cookie",cookieKey:e}}),i}});return[d,(0,t.useCallback)(i=>{n.set(e,JSON.stringify(i)),l(i),s(!0)},[n,e]),o]}(l.eT.CONSENT_PREFERENCES,n?v.ok:v.DX),[p,m]=(0,t.useState)(n&&!g),b=(0,t.useCallback)(e=>{_(e),(0,s.up)(e),m(!1),d.h.updateCategories(e)},[_,m]);return(0,o.jsx)(u.Provider,{value:{showConsentBanner:p,openConsentBanner:()=>m(!0),preferences:c,savePreferences:b},children:i})};function p(){return(0,t.useContext)(u)}},47471:(e,i,n)=>{n.d(i,{BZ:()=>r,YC:()=>t,bu:()=>o,q3:()=>a});let o=e=>{let i=e.capabilities;if(i.includes("api")&&i.includes("chat"))return"unknown";if(i.includes("api"))return i.includes("api_individual")?"api_individual":"api_team";if(i.includes("chat")){if(i.includes("raven")){let i=e.raven_type;return i?"enterprise"===i?"claude_enterprise":"claude_team":"unknown"}return i.includes("claude_max")?"claude_max":i.includes("claude_pro")?"claude_pro":"claude_free"}return"unknown"},a=e=>"claude_pro"===e||"claude_max"===e,t=e=>"claude_team"===e||"claude_enterprise"===e,r=e=>"default_claude_max_5x"===e.rate_limit_tier?"5x":"default_claude_max_20x"===e.rate_limit_tier?"20x":void 0},59983:(e,i,n)=>{n.d(i,{H:()=>s});var o=n(10158),a=n(27062),t=n(7620),r=n(25558);let s=()=>{let{segmentKey:e,segmentCdnHost:i,segmentApiHost:n}=(0,o._r)(),{value:s}=(0,a.fS)("requires_explicit_consent"),d=(0,t.useCallback)(()=>{r.h.reset()},[]);return{analytics:r.h.loadIfNecessary({segmentKey:e,segmentCdnHost:i,segmentApiHost:n,requiresExplicitConsent:s}),reset:d}}},64813:(e,i,n)=>{n.d(i,{IsolatedSegmentProvider:()=>v,U:()=>u});var o=n(54568),a=n(21642),t=n(10158),r=n(27062),s=n(89598),d=n(7620);let l=["onboarding.started","extended_onboarding.started","onboarding.completed","chat.conversation.first_conversation_created","payment_state_success"],c={"onboarding.started":"Started Onboarding","extended_onboarding.started":"Started Onboarding","onboarding.completed":"CompleteRegistration","chat.conversation.first_conversation_created":"NewConversation",payment_state_success:"Purchase"},_=(0,d.createContext)(null);function v(e){let{children:i}=e,{segmentKey:n,segmentCdnHost:v}=(0,t._r)(),u=(0,d.useRef)(null),[g,p]=(0,d.useState)(!1),m=(0,d.useRef)([]),{value:b}=(0,r.fS)("log_segment_events"),f=b&&!0,h=(0,a.Z)(),k=(0,d.useCallback)(function(e){for(var i=arguments.length,n=Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];f&&console.debug("[IsolatedSegmentProvider]",e,...n)},[f]),y=(0,d.useCallback)(()=>{let e=[...m.current];m.current=[],e.forEach(e=>{var i,n;k("Sending message to iframe:",e,m.current),null==(n=u.current)||null==(i=n.contentWindow)||i.postMessage({target:"isolated-segment",...e},"*")})},[k]),w=(0,d.useCallback)(e=>{var i;m.current.push(e),(null==(i=u.current)?void 0:i.contentWindow)&&(g||"init"===e.type)?y():k("iframe not ready, queueing message:",e)},[k,g,y]);(0,s.M)("message",(0,d.useCallback)(e=>{let i=e.data;if("isolated-segment"===i.source)switch(k("Received message from iframe:",i),i.type){case"iframe_ready":k("Iframe ready, initializing Segment with writeKey:",n,"cdnHost:",v),w({type:"init",writeKey:n,cdnHost:v});break;case"segment_initialized":k("Segment in iframe initialized successfully"),p(!0),k("messageQueue when IsolatedSegment is ready",m.current),y(),m.current=[];break;default:k("Message from isolated-segment iframe:",i.type)}},[v,n,k,w,p,y]));let x=(0,d.useCallback)((e,i,n)=>{if(k("Tracking event:",e,i,n),l.includes(e)){let o=c[e]||e;k("Sending event to Facebook Pixel:",e,o,i),w({type:"track",event:o,properties:i,options:n})}},[k,w]),C=(0,d.useCallback)((e,i)=>{k("Identifying user:",e,i),w({type:"identify",userId:e,traits:i})},[k,w]),S=(0,d.useCallback)(()=>{k("Sending ping..."),w({type:"ping"})},[k,w]),z=(0,d.useMemo)(()=>({isReady:g,track:x,identify:C,sendPing:S}),[g,x,C,S]);return(0,o.jsxs)(_.Provider,{value:z,children:[i,h&&(0,o.jsx)("iframe",{ref:u,src:"/isolated-segment.html",style:{display:"none"},referrerPolicy:"no-referrer",sandbox:"allow-scripts allow-same-origin",title:""})]})}function u(){return(0,d.useContext)(_)}},98518:(e,i,n)=>{n.d(i,{d8:()=>y,f:()=>w,st:()=>k,ye:()=>h});var o=n(29585),a=n(46612),t=n(47471),r=n(27062),s=n(16006),d=n(7620),l=n(21642),c=n(77186),_=n(10158),v=n(35290),u=n(96712),g=n(1761),p=n(59983),m=n(64813);let b={snippets_command_used:{version:1},file_upload_too_large:{version:1},sse_interrupted:{version:1},snippets_suggestion_selected:{version:1},payment_modal_open:{version:1},pro_waitlist_requested:{version:1},payment_state_poll_for_invoice:{version:1},payment_state_poll_for_payment:{version:1},payment_state_poll_for_capability:{version:1},payment_state_payment_requires_confirmation:{version:1},payment_state_payment_failed:{version:1},payment_state_success:{version:1},payment_state_timed_out:{version:1},"onboarding.pubsec_system_use.started":{version:1},"onboarding.phone_verification.start":{version:1},"onboarding.phone_verification.sent_code":{version:1},"onboarding.phone_verification.invalid_code":{version:1},"onboarding.phone_verification.verified_code":{version:1},"onboarding.age_verification.start":{version:1},"onboarding.age_verification.complete":{version:1},"onboarding.name_input.started":{version:1},"onboarding.name_input.finished":{version:1},"onboarding.acceptable_use.started":{version:1},"onboarding.acceptable_use.finished":{version:1},"onboarding.disclaimers.started":{version:1},"onboarding.disclaimers.finished":{version:1},"onboarding.started":{version:1},"onboarding.completed":{version:1},"extended_onboarding.started":{version:1},"extended_onboarding.disclaimer.completed":{version:1},"extended_onboarding.name_input.completed":{version:1},"extended_onboarding.work_function.completed":{version:1},"extended_onboarding.drive_integration.started":{version:1},"extended_onboarding.drive_integration.skipped":{version:1},"extended_onboarding.drive_integration.completed":{version:1},"extended_onboarding.gmail_integration.started":{version:1},"extended_onboarding.gmail_integration.skipped":{version:1},"extended_onboarding.gmail_integration.completed":{version:1},"extended_onboarding.gcal_integration.started":{version:1},"extended_onboarding.gcal_integration.skipped":{version:1},"extended_onboarding.gcal_integration.completed":{version:1},"extended_onboarding.all_integrations.skipped":{version:1},"extended_onboarding.all_integrations.completed":{version:1},"extended_onboarding.topics.completed":{version:1},"extended_onboarding.example_prompts.completed":{version:1},"extended_onboarding.completed":{version:1},"extended_onboarding.hear_about.completed":{version:1},"extended_onboarding.hear_about.source_selected":{version:1},"extended_onboarding.hear_about.skipped":{version:1},"extended_onboarding.code_upgrade.completed":{version:1},"extended_onboarding.code_intro.completed":{version:1},"extended_onboarding.code_install.completed":{version:1},"pro_subscription.upgraded_to_annual":{version:1},"pro_subscription.upgraded_to_max":{version:1},"max_subscription.downgraded_to_max":{version:1},"max_subscription.downgraded_to_pro":{version:1},"chat.conversation.first_conversation_created":{version:1},"chat.conversation.token_limit_exceeded":{version:1},"chat.conversation.token_limit_will_exceed":{version:1},"chat.conversation.too_long_prompt:loaded":{version:1},"chat.conversation.too_long_prompt:accepted":{version:1},"chat.conversation.too_long_prompt:dismissed":{version:1},"chat.conversation.too_long_prompt_warning:loaded":{version:1},"chat.conversation.too_long_prompt_warning:accepted":{version:1},"chat.conversation.too_long_prompt_warning:dismissed":{version:1},"chat.share.button.clicked":{version:1},"chat.share.modal.share_button.clicked":{version:1},"chat.share.modal.unshare_button.clicked":{version:1},"chat.share.open_link.clicked":{version:1},"chat.share.copy_link.clicked":{version:1},"ts.eu_election_banner.shown":{version:1,data_team_tag:"ts"},"ts.banner.shown":{version:1,data_team_tag:"ts"},"billing.credit_card.submitted":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.contact_sales.completed":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.contact_sales.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.payment_info.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.payment_info.submitted":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.setup_billing.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.setup_billing.submitted":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.ts_questionnaire.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.ts_questionnaire.submitted":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.ts_questionnaire_manual.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.select_plan.loaded":{version:1,data_team_tag:"billing_funnel"},"billing.upgrade.select_plan.completed":{version:1,data_team_tag:"billing_funnel"},"console.feedback.opened":{version:1},"console.feedback.submitted":{version:1},"evals.revision.created":{version:1},"evals.show_prompt_preview.toggled":{version:1},"evals.show_golden_answers.toggled":{version:1},"evals.run_all.submitted":{version:1},"evals.run_all.stopped":{version:1},"evals.test_case.run.submitted":{version:1},"evals.test_case.run.completed":{version:1},"evals.test_case.run.failed":{version:1},"evals.test_case.create.submitted":{version:1},"evals.test_case.delete.submitted":{version:1},"evals.select_revision.clicked":{version:1},"evals.test_case.update_rating.submitted":{version:1},"evals.test_case.import.show_modal.clicked":{version:1},"evals.test_case.import.browse.clicked":{version:1},"evals.test_case.import.success":{version:1},"evals.comparison.add_button.clicked":{version:1},"evals.comparison.remove_button.clicked":{version:1},"evals.comparison.other_revision.selected":{version:1},"test_case_generator.generate.started":{version:1},"test_case_generator.edit_logic.clicked":{version:1},"metaprompter.modal.loaded":{version:2},"metaprompter.example.selected":{version:1},"metaprompter.generate.started":{version:1},"metaprompter.generate.stop.attempted":{version:1},"metaprompter.generate.finished":{version:1},"metaprompter.start_editing.clicked":{version:1},"onboarding.invite_accept_page.invite_accept.submitted":{version:1,data_team_tag:"onboarding_funnel"},"onboarding.invite_accept_page.invite_reject.submitted":{version:1,data_team_tag:"onboarding_funnel"},"onboarding.invite_accept_page.loaded":{version:1,data_team_tag:"onboarding_funnel"},"onboarding.organization_create.loaded":{version:1,data_team_tag:"onboarding_funnel"},"onboarding.organization_create.submitted":{version:1,data_team_tag:"onboarding_funnel"},"workbench.prompt.new":{version:1},"workbench.completion.started":{version:2},"workbench.completion.finished":{version:2},"workbench.completion_stream.started":{version:1},"workbench.completion_stream.finished":{version:1},"workbench.tab_selection.clicked":{version:1},"workbench.variables_pane.loaded":{version:1},"workbench.examples.pane.loaded":{version:1},"workbench.examples.example.added":{version:2},"workbench.examples.example.deleted":{version:1},"workbench.examples.converted_to_raw_text":{version:1},"workbench.code_modal.opened":{version:1},"workbench.code_modal.code_copied":{version:1},"claudeai.projects.list_view.switched":{version:1},"claudeai.artifacts.execution.error":{version:1},"claudeai.conversation.suggestion.applied":{version:1},"claudeai.conversation.recent.opened":{version:1},"claudeai.conversation.starred":{version:1},"claudeai.conversation.unstarred":{version:1},"claudeai.projects.activity.shared_conversation.opened":{version:1},"claudeai.projects.project_starter.clicked":{version:1},"claudeai.projects.chat_starter.clicked":{version:1},"claudeai.projects.starred":{version:1},"claudeai.projects.unstarred":{version:1},"claudeai.conversation.artifact.vscode_exported":{version:1},"claudeai.television.viewed":{version:1},"claudeai.television.onboarding_placeholder.viewed":{version:1},"claudeai.television.signup_placeholder.viewed":{version:1},"claudeai.television.session.created":{version:1},"claudeai.television.session.viewed":{version:1},"claudeai.television.github_actions_job.viewed":{version:1},"claudeai.television.notification_modal.viewed":{version:1},"claudeai.television.followup.submitted":{version:1},"claudeai.television.session.shared":{version:1},"claudeai.television.pr.create_clicked":{version:1},"claudeai.television.teleport.copied":{version:1},"claudeai.television.session.rename_clicked":{version:1},"claudeai.television.session.archived":{version:1},"claudeai.television.session.deleted":{version:1},"claudeai.television.session.retry_clicked":{version:1},"claudeai.settings.preview_feature.toggled":{version:1},"claudeai.settings.preview_feature.opened":{version:1},"claudeai.support.opened":{version:1},"claudeai.get_help.clicked":{version:1},"claudeai.conversation.feedback.sent":{version:1},"claudeai.conversation.setting.toggled":{version:1},"claudeai.thinking_cell.clicked":{version:1},"ccos.chatsuggestion.clicked":{version:1},"ccos.chatsuggestions.loaded":{version:1},"ccos.chatsuggestions.feedback":{version:1},"styles.selector.clicked":{version:1},"styles.modal":{version:1},"styles.nux.create_clicked":{version:1},"styles.custom.create_clicked":{version:1},"styles.custom.describe_clicked":{version:1},"styles.custom.describe_selected":{version:1},"styles.selected":{version:1},"artifact.feedback.sentiment":{version:1},"artifact.feedback.note":{version:1},"artifact.share_button_clicked":{version:1},"artifact.publish_button_clicked":{version:1},"artifact.share.modal.share_button_clicked":{version:1},"artifact.publish.modal.publish_button_clicked":{version:1},"artifact.studio.create_button_clicked":{version:1},"artifact.studio.create_mode_selected":{version:1},"artifact.studio.remix":{version:1},"artifact.studio.view_full_chat":{version:1},"artifact.studio.copy_prompt":{version:1},"artifact.popover.artifacts_tab_clicked":{version:1},"artifact.popover.dismiss_button_clicked":{version:1},"artifact.popover.dismiss_x_clicked":{version:1},"artifact.interaction.click":{version:1},"artifact.callout.learn_more_clicked":{version:1},"artifact.callout.enable_clicked":{version:1},"artifact.callout.dismissed":{version:1},"artifact.public.remix":{version:1},"artifact.public.share":{version:1},"claudeai.mcp.tool.toggled":{version:1},"claudeai.mcp.create_server":{version:1},"claudeai.mcp.auth.init":{version:1},"claudeai.mcp.auth.completed":{version:1},"claudeai.mcp.directory.page_view":{version:1},"mcp.servers.listed":{version:1},"mcp.servers.connected":{version:1},"mcp.resources.listed":{version:1},"mcp.resources.read":{version:1},"mcp.prompts.listed":{version:1},"mcp.prompts.used":{version:1},"mcp.tools.listed":{version:1},"mcp.tools.called":{version:1},"mcp.sampling.requested":{version:1},"mcp.websocket.transport.connected":{version:1},"mcp.websocket.authfailure":{version:1},"mcp.websocket.transport.reconnected":{version:1},"harmony.file.saved":{version:1},"harmony.suggestion.accepted":{version:1},"harmony.suggestion.rejected":{version:1},"hfi.comparative_model.selected":{version:1},"hfi.comparative_model.selection_cleared":{version:1},"hfi.comparative_model.streaming.started":{version:1},"hfi.comparative_model.streaming.finished":{version:1},"hfi.comparative_model.feedback_bar.switch_response.clicked":{version:1},"hfi.comparative_model.feedback_bar.prefer_response.clicked":{version:1},"apps.download_button_clicked":{version:1},"apps.nudge_banner_shown":{version:1},"apps.nudge_banner_clicked":{version:1},"apps.harmony_directory_synced":{version:1},"console.onboarding.name_and_legal.loaded":{version:1,data_team_tag:"onboarding_funnel"},"console.onboarding.name_and_legal.submitted":{version:1,data_team_tag:"onboarding_funnel"},"tengu.waitlist.update":{version:1},"tengu.waitlist.details":{version:1},"oauth.authorize.approved":{version:1},"oauth.authorize.denied":{version:1},"oauth.authorize.success":{version:1},"oauth.authorize.failure":{version:1},"console.onboarding.account_type.loaded":{version:1,data_team_tag:"onboarding_funnel"},"console.onboarding.account_type.individual_selected":{version:1,data_team_tag:"onboarding_funnel"},"console.onboarding.account_type.organization_selected":{version:1,data_team_tag:"onboarding_funnel"},"console.onboarding.organization_details.loaded":{version:1,data_team_tag:"onboarding_funnel"},"console.onboarding.organization_details.submitted":{version:1,data_team_tag:"onboarding_funnel"},"console.navigation.nav_item.clicked":{version:1},"login.account.created":{version:1},"login.email.sending_magic_link":{version:1},"login.email.magic_link_sent":{version:1},"login.email.magic_link_send_error":{version:1},"login.email.verifying_magic_link":{version:1},"login.email.magic_link_success":{version:1},"login.email.magic_link_verification_error":{version:1},"login.email.sso_initiated":{version:1},"login.email.sso_success":{version:1},"login.email.sso_verifying_callback":{version:1},"login.email.sso_verification_error":{version:1},"login.email.verifying_code":{version:1},"login.email.code_verification_error":{version:1},"login.email.finished":{version:1},"login.google.started":{version:1},"login.google.error":{version:1},"login.google.verifying":{version:1},"login.google.verification_error":{version:1},"login.google.finished":{version:1},"login.email.error":{version:1},"landing.section.features.viewed":{version:1},"landing.section.pricing.viewed":{version:1},"spotlight.shown":{version:1},"spotlight.dismissed":{version:1},"spotlight.action_clicked":{version:1},"claudeai.conversation.citation_clicked":{version:1},"claudeai.in_chat_upsell.connect_gdrive.displayed":{version:1},"claudeai.in_chat_upsell.connect_gdrive.start":{version:1},"claudeai.in_chat_upsell.dismiss":{version:1},"claudeai.cardamom_prompts.category_displayed":{version:1},"claudeai.cardamom_prompts.prompt_displayed":{version:1},"claudeai.cardamom_prompts.prompt_used":{version:1},"claudeai.memory_themes.themes_displayed":{version:1},"claudeai.memory_themes.theme_used":{version:1},"claudeai.memory_themes.fallback_triggered":{version:1},"artifactinlinefeedback.selection.clicked":{version:1},"claudeai.toast.shown":{version:1},"claudeai.toast.dismissed":{version:1},"claudeai.toast.cta_clicked":{version:1},"claudeai.invite_contest.clicked":{version:1},"claudeai.invite_contest.dismissed":{version:1},"claudeai.notification.permission.request_started":{version:1},"claudeai.notification.permission.result":{version:1},"claudeai.pricing.plan_toggled":{version:1},"claudeai.pricing.max_plan_toggled":{version:1},"claudeai.pricing.promo_applied":{version:1},"claudeai.pricing.payment_modal.viewed":{version:1},"claudeai.pricing.payment_form_submitted":{version:1},"claudeai.pricing.payment_failed":{version:1},"claudeai.teams.existing_subscription_warning_modal.viewed":{version:1},"claudeai.teams.minimum_seats_warning_modal.accepted":{version:1},"claudeai.teams.minimum_seats_warning_modal.viewed":{version:1},"claudeai.teams.name_entered":{version:1},"claudeai.login.resend_requested":{version:1},"claudeai.login.email_submitted":{version:1},desktop_dxt_installed:{version:1},"marketing.consent.updated":{version:1},"claudeai.upgrade.pro_page_viewed":{version:1},"claudeai.upgrade.max_page_viewed":{version:1},"claudeai.recordplayer.viewed":{version:1},"claudeai.recordplayer.sidebar.toggled":{version:1},"claudeai.recordplayer.session.created":{version:1},"claudeai.recordplayer.session.selected":{version:1},"claudeai.recordplayer.session.viewed":{version:1},"claudeai.recordplayer.prompt.submitted":{version:1},"claudeai.recordplayer.environment.selected":{version:1},"claudeai.recordplayer.elicitation.responded":{version:1},"claudeai.model_upsell.tooltip.viewed":{version:1},"claudeai.model_upsell.tooltip.clicked":{version:1},"claudeai.model_upsell.tooltip.dismissed":{version:1},"wiggle.file.downloaded":{version:1},"wiggle.file.downloaded_all":{version:1},"wiggle.file.copy_to_clipboard":{version:1},"wiggle.file.add_to_project":{version:1},"wiggle.file.download_as_pdf":{version:1},"wiggle.file.share_artifact":{version:1},"wiggle.file.publish_artifact":{version:1},wiggle_gdrive_export_attempted:{version:1},wiggle_gdrive_export_success:{version:1},wiggle_gdrive_export_failed:{version:1},wiggle_gdrive_export_auth_error:{version:1},wiggle_gdrive_connection_modal_shown:{version:1},wiggle_gdrive_connection_initiated:{version:1},wiggle_gdrive_connection_success:{version:1},"claudeai.plus_menu.opened":{version:1},"claudeai.plus_menu.screenshot_clicked":{version:1},"claude_code_install_page.get_started_clicked":{version:1},"claude_code_install_page.upgrade_clicked":{version:1},"claude_code_install_page.command_copied":{version:1},"claude_code_install_page.documentation_clicked":{version:1},"claude_code_install_page.advanced_setup_clicked":{version:1},"claude_code_install_page.troubleshooting_clicked":{version:1},"claude_code_install_page.done_clicked":{version:1},"claude_code_upgrade_page.viewed":{version:1},"claude_code_upgrade_page.upgrade_clicked":{version:1},grove_policy_viewed:{version:1},grove_policy_toggled:{version:1},grove_policy_submitted:{version:1},grove_policy_dismissed:{version:1},grove_policy_details_clicked:{version:1},"crochet.landing.page_viewed":{version:1},"crochet.install.page_viewed":{version:1},"crochet.landing.join_preview.clicked":{version:1},"crochet.landing.install_extension.clicked":{version:1},"crochet.landing.watch_demo.clicked":{version:1},"crochet.install.challenge.started":{version:1},"crochet.install.try_usecase.clicked":{version:1}};function f(e,i,n){var o,r,s;let d={...{userAgent:null==(o=window.navigator)?void 0:o.userAgent,fbc:u.m.get(a.eT.FBCLID),gclid:u.m.get(a.eT.GOOGLE_GCL_AW)}};if(n&&(d.country=n),(null==e?void 0:e.email_address)&&(d.email=e.email_address),e){d.account_created_at=Date.parse(e.created_at),d.account_uuid=e.uuid;let n=i||(null==(s=e.memberships)||null==(r=s[0])?void 0:r.organization);if(n){d.organization_uuid=n.uuid,d.billing_type=n.billing_type;let e=(0,t.bu)(n),i=(0,t.BZ)(n);d.org_type=e,d.subscription_plan="claude_max"===e&&i?"".concat(e," ").concat(i):e}}return d}let h=()=>{let{account:e,activeOrganization:i}=(0,g.YL)(),{ipCountry:n}=(0,_._r)();return(0,d.useMemo)(()=>f(e,i,n),[e,i,n])},k=()=>{let{analytics:e}=(0,p.H)(),i=(0,m.U)(),{preferences:n}=(0,v.S)(),{value:o}=(0,r.fS)("log_segment_events"),a=(0,l.Z)(),{account:t,activeOrganization:s,isLoading:c}=(0,g.YL)(),u=(0,_.fZ)(),{ipCountry:h}=(0,_._r)(),k=null==t?void 0:t.uuid,y=null==s?void 0:s.uuid,w=null==s?void 0:s.billing_type,x=(0,d.useCallback)(i=>{let o=!i&&!t;return!c&&e&&a&&(!o||n.analytics)},[c,e,a,t,n.analytics]),C=(0,d.useCallback)(e=>f(null!=e?e:t,s,h),[t,s,h]),S=(0,d.useCallback)(async(n,a)=>{var t;let{event_key:r,...s}=n,d={account_uuid:null!=(t=null==a?void 0:a.uuid)?t:k,organization_uuid:y,billing_type:w,surface:u?"claude-ai":"console",...b[r],...s},l={context:{traits:C(a)}};o&&console.log("[Segment Event] track: ".concat(r),d,l),x(a)&&(await (null==e?void 0:e.track(r,d,l)),null==i||i.track(r,d,l))},[e,i,k,y,w,u,o,x,C]),z=(0,d.useCallback)(async(n,a)=>{o&&console.log("[Segment Event] identify: ".concat(n),a),x()&&(await (null==e?void 0:e.identify(n,a)),null==i||i.identify(n,a))},[e,i,x,o]),E=(0,d.useCallback)(async(i,n)=>{o&&console.log("[Segment Event] alias: ".concat(n," -> ").concat(i)),x()&&await (null==e?void 0:e.alias(i,n))},[e,x,o]),j=(0,d.useCallback)(async(i,n)=>{var a,r,s;if(o&&console.log("[Segment Event] page_view: ".concat(i),n),x())(null!=(r=null==(a=await (null==e?void 0:e.user()))?void 0:a.id())?r:void 0)===(null!=(s=null==t?void 0:t.uuid)?s:void 0)&&await (null==e?void 0:e.page(i,n))},[e,x,t,o]);return(0,d.useMemo)(()=>({track:S,identify:z,page:j,alias:E,getTraitsWithContext:C}),[S,z,j,E,C])},y=(e,i,n,a)=>{let t=k(),{onSuccess:r,onError:s,...d}=a||{};return(0,c.L2)(i,n,{onSuccess(){for(var i=arguments.length,n=Array(i),o=0;o<i;o++)n[o]=arguments[o];t.track({event_key:e,result:"success"}),null==r||r(...n)},onError(i){let n;for(var a=arguments.length,r=Array(a>1?a-1:0),d=1;d<a;d++)r[d-1]=arguments[d];i instanceof o.LG&&(n=i.type),t.track({event_key:e,result:"failure",failure_reason:n}),null==s||s(i,...r)},...d})},w=e=>{var i;let{eventKey:n,threshold:o=.5,freezeOnceVisible:a=!0}=e,{track:t}=k(),r=(0,d.useRef)(!1),{ref:l,entry:c}=(0,s.v)({threshold:o}),_=null!=(i=null==c?void 0:c.isIntersecting)&&i;return(0,d.useEffect)(()=>{!_||a&&r.current||(t({event_key:n}),r.current=!0)},[_,t,n,a]),l}}}]);